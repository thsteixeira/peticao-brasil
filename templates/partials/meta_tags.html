{% load static %}
{# Basic Meta Tags #}
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="description" content="{{ meta_description|default:'Petição Brasil - Plataforma de petições online para mudanças sociais. Crie e assine petições para causas que você acredita.' }}">
<meta name="keywords" content="{% if meta_keywords %}{{ meta_keywords }}{% else %}petição, petições online, mudança social, Brasil, democracia, ativismo{% endif %}">
<meta name="author" content="{% if meta_author %}{{ meta_author }}{% else %}Petição Brasil{% endif %}">

{# Cache Control for HTML pages - don't cache HTML, only static assets #}
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

{# Favicons #}
<link rel="icon" type="image/x-icon" href="{% static 'images/favicon_io/favicon.ico' %}">
<link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon_io/favicon-32x32.png' %}">
<link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon_io/favicon-16x16.png' %}">
<link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon_io/apple-touch-icon.png' %}">

{# PWA Meta Tags #}
<meta name="theme-color" content="#1e4d7b">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Petição Brasil">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="Petição Brasil">
<meta name="msapplication-TileColor" content="#1e4d7b">
<meta name="msapplication-TileImage" content="{% static 'images/favicon_io/android-chrome-192x192.png' %}">
<meta name="msapplication-config" content="{% static 'browserconfig.xml' %}">

{# PWA Links #}
<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="{% static 'images/favicon_io/favicon.ico' %}">

{# Canonical URL #}
{% if canonical_url %}
<link rel="canonical" href="{{ canonical_url }}">
{% endif %}

{# Open Graph Meta Tags #}
<meta property="og:site_name" content="Petição Brasil">
<meta property="og:type" content="{% if og_type %}{{ og_type }}{% else %}website{% endif %}">
<meta property="og:title" content="{% firstof og_title meta_title 'Petição Brasil - Plataforma de Petições Online' %}">
<meta property="og:description" content="{% firstof og_description meta_description 'Faça a diferença! Crie e assine petições para causas que você acredita.' %}">
<meta property="og:url" content="{% firstof og_url canonical_url request.build_absolute_uri %}">
{% if og_image %}
<meta property="og:image" content="{{ og_image }}">
{% else %}
<meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'images/social/og-image.png' %}">
{% endif %}
<meta property="og:image:secure_url" content="{% if og_image %}{{ og_image }}{% else %}{{ request.scheme }}://{{ request.get_host }}{% static 'images/social/og-image.png' %}{% endif %}">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="{% firstof og_image_alt 'Petição Brasil - Democracia Digital' %}">
<meta property="og:locale" content="pt_BR">
{% if article_published_time %}
<meta property="article:published_time" content="{{ article_published_time }}">
{% endif %}
{% if article_modified_time %}
<meta property="article:modified_time" content="{{ article_modified_time }}">
{% endif %}
{% if article_author %}
<meta property="article:author" content="{{ article_author }}">
{% endif %}
{% if article_section %}
<meta property="article:section" content="{{ article_section }}">
{% endif %}
{% if article_tag %}
<meta property="article:tag" content="{{ article_tag }}">
{% endif %}

{# Twitter Card Meta Tags #}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@PeticaoBrasil">
<meta name="twitter:title" content="{% firstof twitter_title og_title meta_title 'Petição Brasil' %}">
<meta name="twitter:description" content="{% firstof twitter_description og_description meta_description 'Plataforma de petições online para mudanças sociais no Brasil.' %}">
{% if twitter_image %}
<meta name="twitter:image" content="{{ twitter_image }}">
{% elif og_image %}
<meta name="twitter:image" content="{{ og_image }}">
{% else %}
<meta name="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'images/social/twitter-card.png' %}">
{% endif %}
<meta name="twitter:image:alt" content="{% firstof twitter_image_alt og_image_alt 'Petição Brasil - Plataforma de Democracia Digital' %}">
{% if twitter_creator %}
<meta name="twitter:creator" content="{{ twitter_creator }}">
{% endif %}

{# WhatsApp Specific - uses Open Graph tags but we ensure they're complete #}
{# WhatsApp uses og:title, og:description, og:image for preview #}

{# Additional SEO Meta Tags #}
<meta name="robots" content="{% if noindex %}noindex, nofollow{% else %}index, follow{% endif %}">
<meta name="googlebot" content="{% if noindex %}noindex, nofollow{% else %}index, follow{% endif %}">

{# Additional Structured Data #}
{% block structured_data %}
{% endblock %}
